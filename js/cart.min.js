const btnDown=document.querySelectorAll(".quantity-block__btn-down"),btnUp=document.querySelectorAll(".quantity-block__btn-up"),inputQuantity=document.querySelectorAll(".quantity-block__input"),price=document.querySelectorAll(".card__price"),btnAddToCart=document.querySelectorAll(".card__btn-basket");inputQuantity.forEach(t=>{t.addEventListener("keydown",t=>{console.log(t.keyCode),46==t.keyCode||8==t.keyCode||9==t.keyCode||27==t.keyCode||65==t.keyCode&&!0===t.ctrlKey||t.keyCode>=35&&t.keyCode<=39||(t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()})}),btnDown.forEach(t=>{t.addEventListener("click",(function(){parseInt(t.nextElementSibling.value)>1&&(t.nextElementSibling.value=parseInt(t.nextElementSibling.value)-1)}))}),btnUp.forEach(t=>{t.onclick=function(){t.previousElementSibling.value=parseInt(t.previousElementSibling.value)+1}}),price.forEach(t=>{t.closest(".card").dataset.price=parseInt(t.textContent)});const generateCartProducts=(t,e,n,r)=>`\n\t\t<tr class="product">\n\t\t\t<td class="product__name">\n\t\t\t\t<img src="${t}" alt="Балхам">\n\t\t\t\t<div class="product__options">\n\t\t\t\t\t<h3 class="product__title">\n\t\t\t\t\t\t${e}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div class="product__weight weight-checkbox">\n\t\t\t\t\t\t<label class="weight-checkbox__weight-light">\n\t\t\t\t\t\t\t<input type="radio" name="weight_balham" value="150">\n\t\t\t\t\t\t\t<span>150 гр</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="weight-checkbox__weight-middle">\n\t\t\t\t\t\t\t<input type="radio" name="weight_balham" value="200">\n\t\t\t\t\t\t\t<span>200 гр</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="weight-checkbox__weight-big">\n\t\t\t\t\t\t\t<input type="radio" name="weight_balham" value="250">\n\t\t\t\t\t\t\t<span>250 гр</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td class="product__price" data-150="1350" data-200="1570" data-250="1800">\n\t\t\t\t${n} ₽\n\t\t\t</td>\n\t\t\t<td class="product__quantity">\n\t\t\t\t<div class="product__quantity-block quantity-block">\n\t\t\t\t\t<button class="quantity-block__btn-down">\n\t\t\t\t\t\t-\n\t\t\t\t\t</button>\n\t\t\t\t\t<span>${r}</span>\n\t\t\t\t\t<button class="quantity-block__btn-up">\n\t\t\t\t\t\t+\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td class="product__sum">\n\t\t\t\t1350 ₽\n\t\t\t</td>\n\t\t\t<td class="product__delete">\n\t\t\t\t<button class="btn-remove-product-js">\n\t\t\t\t\t<img src="img/icons/close.svg" alt="удалить">\n\t\t\t\t</button>\n\t\t\t</td>\n\t\t</tr>\t\n\t`,updateStorage=t=>{let e=t.innerHTML;localStorage.setItem("products",e)};let productsWrapper=document.createElement("table");productsWrapper.className="products-wrapper";let productsWrapperBody=document.createElement("tbody");productsWrapperBody.className="tbody",productsWrapper.insertAdjacentElement("afterbegin",productsWrapperBody),btnAddToCart.forEach(t=>{t.addEventListener("click",t=>{let e=t.currentTarget.closest(".card"),n=e.querySelector(".card__image-main").getAttribute("src"),r=e.querySelector(".card__title").textContent,c=parseInt(e.querySelector(".card__price").textContent),a=e.querySelector(".card__quantity-block span").textContent;productsWrapper.querySelector("tbody").insertAdjacentHTML("beforeEnd",generateCartProducts(n,r,c,a)),updateStorage(productsWrapper.querySelector("tbody"))})}),document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".tabs"),e=document.querySelectorAll(".tabs__block"),n=document.querySelectorAll(".tabs__btn-js");t&&t.addEventListener("click",t=>{if(t.target.classList.contains("tabs__btn-js")){n.forEach(t=>{t.classList.remove("tabs__item--active")}),t.target.classList.add("tabs__item--active");const e=t.target.dataset.tabsPath;r(e)}});const r=t=>{e.forEach(t=>{t.classList.remove("tabs__block--active")}),document.querySelectorAll(".card[data-round]").forEach(t=>{t.classList.remove("active")}),document.querySelector(`[data-tabs-target="${t}"]`).classList.add("tabs__block--active")}});const product=document.querySelectorAll(".product"),table=document.querySelector(".cart__products-list"),tableHead=document.querySelector(".thead"),tableBody=document.querySelector(".tbody"),generalSum=document.querySelector(".sidebar__sum"),promoCheckbox=document.querySelector(".promo-checkbox"),promoInput=document.querySelector(".sidebar__input"),btnClearPromoInput=document.querySelector(".clear-input"),btnOrder=document.querySelector(".sidebar__btn-order");product.forEach(t=>{const e=t.querySelector(".product__quantity"),n=t.querySelector(".product__sum"),r=t.querySelector(".quantity-block__btn-up"),c=t.querySelector(".quantity-block__btn-down"),a=t.querySelector(".btn-remove-product-js"),o=t.querySelector(".product__price"),d=t.querySelector(".product__weight"),l=t.querySelector('input[value="150"]'),s=t.querySelector('input[value="200"]'),u=t.querySelector('input[value="250"]'),i=()=>{l.checked&&(o.innerText=o.dataset[150]+" ₽"),s.checked&&(o.innerText=o.dataset[200]+" ₽"),u.checked&&(o.innerText=o.dataset[250]+" ₽")},p=()=>{const r=parseInt(t.querySelector(".product__price").textContent)*parseInt(e.querySelector("span").textContent);n.innerText=r+" ₽";const c=document.querySelectorAll(".product__sum");let a=0;c.forEach(t=>{a+=parseInt(t.textContent),generalSum.innerText=a+" ₽"})};window.addEventListener("DOMContentLoaded",()=>{i(),p()}),d.addEventListener("click",()=>{i(),p()}),r.addEventListener("click",p),c.addEventListener("click",p),a.addEventListener("click",()=>{t.remove(),0===document.querySelectorAll(".product").length?(tableHead.classList.add("hide"),tableBody.classList.add("empty"),tableBody.insertAdjacentHTML("afterbegin","<span>Корзина пуста</span>"),generalSum.innerText="0 ₽",btnOrder.classList.remove("btn--primary"),btnOrder.classList.add("btn--disable")):(tableHead.classList.remove("hide"),tableBody.classList.remove("empty"),tableBody.querySelector("span").remove(),btnOrder.classList.add("btn--primary"),btnOrder.classList.remove("btn--disable")),p();let e=document.querySelector(".tbody");updateStorage(e)})}),document.querySelector(".sidebar__label-checkbox").addEventListener("click",()=>{promoCheckbox.checked?(promoInput.classList.add("active"),btnClearPromoInput.classList.add("active")):(promoInput.classList.remove("active"),btnClearPromoInput.classList.remove("active"))}),btnClearPromoInput.addEventListener("click",()=>{promoInput.value=""}),btnOrder.addEventListener("click",()=>{});