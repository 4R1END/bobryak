const btnDown=document.querySelectorAll(".quantity-block__btn-down"),btnUp=document.querySelectorAll(".quantity-block__btn-up"),price=document.querySelectorAll(".card__price");btnDown.forEach(e=>{e.addEventListener("click",(function(){parseInt(e.nextElementSibling.innerText)>1&&(e.nextElementSibling.innerText=parseInt(e.nextElementSibling.innerText)-1)}))}),btnUp.forEach(e=>{e.onclick=function(){e.previousElementSibling.innerText=parseInt(e.previousElementSibling.innerText)+1}}),price.forEach(e=>{e.closest(".card").dataset.price=parseInt(e.textContent)});const rangeSlider=document.getElementById("range-slider");rangeSlider&&noUiSlider.create(rangeSlider,{start:[100,1e4],connect:!0,step:1,range:{min:[100],max:[1e4]}});const inputMin=document.getElementById("input-min"),inputMax=document.getElementById("input-max"),inputsArray=[inputMin,inputMax];rangeSlider.noUiSlider.on("update",(function(e,t){inputsArray[t].value=Math.round(e[t])}));const defaultSelect=()=>{const e=document.querySelector(".js-choice");new Choices(e,{searchEnabled:!1})};defaultSelect();const cards=document.querySelectorAll(".card"),catalog=document.querySelector(".catalog__cards"),cardsOfCatalog=catalog.querySelectorAll(".card"),rangeListBtn=document.querySelector(".btn-range-list"),rangeQuadroBtn=document.querySelector(".btn-range-quadro"),popupContainer=document.querySelector(".popup-container"),filtersTitle=document.querySelectorAll(".filters__title"),setDataRoundPer3=(e,t)=>{t<=2&&e.setAttribute("data-round","0"),t>=3&&t<=5&&e.setAttribute("data-round","1"),t>=6&&t<=8&&e.setAttribute("data-round","2"),t>=9&&t<=11&&e.setAttribute("data-round","3"),t>=12&&t<=14&&e.setAttribute("data-round","4")};cardsOfCatalog.forEach((e,t)=>{setDataRoundPer3(e,t)}),filtersTitle.forEach(e=>{e.addEventListener("click",(function(){e.classList.toggle("active"),e.nextElementSibling.classList.toggle("active")}))}),rangeListBtn.addEventListener("click",()=>{rangeListBtn.querySelectorAll(".btn-range-list rect").forEach(e=>{e.setAttribute("fill","#0F5628"),e.setAttribute("stroke","#0F5628")}),rangeQuadroBtn.querySelectorAll(".btn-range-quadro rect").forEach(e=>{e.setAttribute("fill","#9D9D9C"),e.setAttribute("stroke","#9D9D9C")}),catalog.classList.add("list")}),rangeQuadroBtn.addEventListener("click",()=>{rangeQuadroBtn.querySelectorAll(".btn-range-quadro rect").forEach(e=>{e.setAttribute("fill","#0F5628"),e.setAttribute("stroke","#0F5628")}),rangeListBtn.querySelectorAll(".btn-range-list rect").forEach(e=>{e.setAttribute("fill","#9D9D9C"),e.setAttribute("stroke","#9D9D9C")}),catalog.classList.remove("list")}),cards.forEach(e=>{const t=e.querySelector(".card__image-main").getAttribute("src"),r=e.querySelector(".card__title").innerText.replace(/[\r\n]+/gm,""),c=e.querySelector(".card__price").innerText.replace(/[\r\n]+/gm,""),a=e.querySelector(".card__descr").innerText.replace(/[\r\n]+/gm,""),n=e.dataset.name,o=o=>{const l=e.querySelectorAll(".quantity-block");cardQuantityArray=Array.from(l),(o.target.classList.contains("card__image-main")||o.target.classList.contains("card__title")||o.target.classList.contains("card__btn--more-descr"))&&(popupContainer.classList.add("active"),popupContainer.querySelector(".popup__img").setAttribute("src",""+t),popupContainer.querySelector(".popup__title").innerText=r,popupContainer.querySelector(".popup__price").innerText=c,popupContainer.querySelector(".popup__quantity-block").children[1].innerText=l[0].children[1].textContent,popupContainer.querySelector(".popup__descr").innerText=a,popupContainer.querySelector(".popup__more-link").setAttribute("href",`cards/card_${n}.html`))};e.addEventListener("click",e=>{o(e)}),e.querySelector(".card__btn--more-descr").addEventListener("click",e=>{o(e)})}),popupContainer.addEventListener("click",e=>{e.target.classList.contains("popup__close")&&popupContainer.classList.remove("active"),e.target.classList.contains("popup-container")&&popupContainer.classList.remove("active")});const moreProductsBtn=document.querySelector(".btn--more-js"),cardsFirstRound=document.querySelectorAll('.card[data-round="1"]'),cardsSecondRound=document.querySelectorAll('.card[data-round="2"]');moreProductsBtn.addEventListener("click",()=>{console.log(cardsFirstRound),cardsSecondRound.forEach(e=>{console.log(cardsFirstRound[0].classList.contains("active")),cardsFirstRound[0].classList.contains("active")&&!e.classList.contains("active")&&e.classList.add("active")}),cardsFirstRound.forEach(e=>{e.classList.contains("active")||e.classList.add("active")})});const btnApplyFilters=document.querySelector(".filters__btn--apply"),checkedFiltersBlock=document.querySelector(".filters__checked-filters"),clearFiltersBtn=document.querySelector(".filters__btn-clear");let checkedValues;function getCheckedCheckBoxes(){const e=document.querySelectorAll(".filters__checkbox:checked");return checkedValues=Array.from(e).map(e=>e.value),checkedValues}const clearFilters=()=>{for(;checkedFiltersBlock.firstChild;)checkedFiltersBlock.removeChild(checkedFiltersBlock.firstChild)};btnApplyFilters.addEventListener("click",()=>{const e=document.getElementById("input-min"),t=document.getElementById("input-max"),r=[parseInt(e.value),parseInt(t.value)],c=document.querySelectorAll(".filters__checkbox:checked"),a=Array.from(c).map(e=>e.nextElementSibling.textContent);clearFilters(),getCheckedCheckBoxes(),cardsOfCatalog.forEach(e=>{const t=e.dataset.price,c=e.dataset.f;e.classList.remove("hide"),t>=r[0]&&t<=r[1]&&e.classList.add("hide"),checkedValues.length>0&&e.classList.remove("hide"),checkedValues.some(e=>{if(t>=r[0]&&t<=r[1])return e==c})||e.classList.add("hide"),!checkedValues.length>0&&t>=r[0]&&t<=r[1]&&e.classList.remove("hide")}),checkedValues.forEach((e,t)=>{checkedFiltersBlock.insertAdjacentHTML("afterBegin",`\n\t\t\t<div class="filters__checked-filter"  data-f="${c[t].value}">\n\t\t\t\t<span>${a[t]}</span>\n\t\t\t\t<button class="filter-remove">x</button>\n\t\t\t</div>\n\t\t`)})}),clearFiltersBtn.addEventListener("click",()=>{clearFilters(),document.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.checked=!1}),cardsOfCatalog.forEach(e=>{e.classList.remove("hide")})}),checkedFiltersBlock.addEventListener("click",e=>{const t=document.querySelectorAll(".filters__checkbox:checked");if(e.target.classList.contains("filter-remove")){e.target.closest(".filters__checked-filter").remove(),t.forEach(t=>{t.value===e.target.closest(".filters__checked-filter").dataset.f&&(t.checked=!1)});const r=e.target.closest("filters__checked-filter").dataset.f;document.querySelectorAll(`.card[data-f="${r}"]`).forEach(e=>{e.classList.remove("hide")})}});const sortSelect=document.getElementById("sortselect"),dataPrice="price",getSelectValue=()=>sortSelect.value,insertAfter=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),sortToUp=e=>{for(let t=0;t<catalogCards.children.length;t++)for(let r=t;r<catalogCards.children.length;r++)+catalogCards.children[t].dataset[e]>+catalogCards.children[r].dataset[e]&&(replacedNode=catalogCards.replaceChild(catalogCards.children[r],catalogCards.children[t]),insertAfter(replacedNode,catalogCards.children[t]))},sortToDown=e=>{for(let t=0;t<catalogCards.children.length;t++)for(let r=t;r<catalogCards.children.length;r++)+catalogCards.children[t].dataset[e]<+catalogCards.children[r].dataset[e]&&(replacedNode=catalogCards.replaceChild(catalogCards.children[r],catalogCards.children[t]),insertAfter(replacedNode,catalogCards.children[t]))},sort=e=>{"price-up"===e&&sortToUp("price"),"price-down"===e&&sortToDown("price"),"new"===e&&sortToDown("new"),"popular"===e&&sortToDown("popular"),"sale"===e&&sortToDown("sale")};sortSelect.addEventListener("change",()=>{var e;"price-up"===(e=sortSelect.value)&&sortToUp("price"),"price-down"===e&&sortToDown("price"),"new"===e&&sortToDown("new"),"popular"===e&&sortToDown("popular"),"sale"===e&&sortToDown("sale")}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".tabs"),t=document.querySelectorAll(".tabs__block"),r=document.querySelectorAll(".tabs__btn-js");e&&e.addEventListener("click",e=>{if(e.target.classList.contains("tabs__btn-js")){r.forEach(e=>{e.classList.remove("tabs__item--active")}),e.target.classList.add("tabs__item--active");const t=e.target.dataset.tabsPath;c(t)}});const c=e=>{t.forEach(e=>{e.classList.remove("tabs__block--active")}),document.querySelectorAll(".card[data-round]").forEach(e=>{e.classList.remove("active")}),document.querySelector(`[data-tabs-target="${e}"]`).classList.add("tabs__block--active")}});